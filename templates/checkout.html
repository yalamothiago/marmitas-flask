<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Finalizar Pedido</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        function toggleTroco() {
            const pagamento = document.querySelector('input[name="pagamento"]:checked');
            const trocoDiv = document.getElementById('troco-div');
            trocoDiv.style.display = pagamento && pagamento.value === 'Dinheiro' ? 'block' : 'none';
        }

        window.onload = toggleTroco;
    </script>
</head>
<body>
    <div class="main-content"> {# Envolvendo o conteúdo em um container #}
        <h1>Finalizar Pedido</h1>

        <h2>Resumo do Pedido</h2>
        <ul class="checkout-items-list"> {# Nova classe para estilização específica #}
            {% for item in itens %}
                <li>{{ item.marmita.nome }} - {{ item.quantidade }}x - **R$ {{ item.subtotal|round(2) }}**</li>
            {% endfor %}
        </ul>
        <strong class="checkout-total">Total: R$ {{ total|round(2) }}</strong>
        

        <hr>

        <form method="POST">
            <label>Forma de pagamento:</label><br>
            <label><input type="radio" name="pagamento" value="Cartão" onclick="toggleTroco()" required> Cartão</label><br>
            <label><input type="radio" name="pagamento" value="Pix" onclick="toggleTroco()"> Pix</label><br>
            <label><input type="radio" name="pagamento" value="Dinheiro" onclick="toggleTroco()"> Dinheiro</label><br><br>

            <div id="troco-div" style="display: none;">
                <label for="troco">Troco para quanto?</label>
                <input type="number" step="0.01" name="troco" placeholder="Ex: 50.00"><br><br> {# Tipo number e placeholder #}
            </div>

            <label>Endereço para entrega:</label><br>
            <div class="endereco-box">
                <p>{{ endereco }}</p>
            </div>
            <input type="hidden" name="endereco" value="{{ endereco }}">


            <button type="submit">Confirmar Pedido</button>
        </form>

        <div class="text-center-link"> {# Para centralizar o botão de voltar #}
            <a href="{{ url_for('index') }}" class="btn-voltar">← Voltar ao Cardápio</a>
        </div>
    </div>
</body>
</html>