{% extends 'base.html' %}

{% block title %}Adicionar Ingredientes a {{ condimento.nome }}{% endblock %}

{% block content %}
    <h1>Gerenciar Ingredientes para {{ condimento.nome }}</h1>
    <p>Custo Unitário Atual do Condimento: R$ {{ "%.4f"|format(condimento.custo_unitario) if condimento.custo_unitario is not none else 'N/A' }}</p>

    <h2>Adicionar Ingrediente</h2>
    <form method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div>
            <label for="ingrediente_id">Ingrediente:</label><br>
            <select name="ingrediente_id" class="form-control" required>
                <option value="">Selecione um ingrediente</option>
                {% for ing in ingredientes_disponiveis %}
                    <option value="{{ ing.id }}">{{ ing.nome }} (Estoque: {{ ing.quantidade }} {{ ing.unidade_medida }}, Custo Unit.: R$ {{ "%.4f"|format(ing.custo_por_unidade) if ing.custo_por_unidade is not none else 'N/A' }})</option>
                {% endfor %}
            </select>
        </div>
        <div>
            <label for="quantidade">Quantidade (na unidade do ingrediente):</label><br>
            <input type="number" step="0.01" name="quantidade" class="form-control" required>
        </div>
        <br>
        <button type="submit" class="btn btn-primary">Adicionar</button>
    </form>

    <h2>Ingredientes Atuais do Condimento</h2>
    {% if condimento_itens_existentes %}
        <ul class="data-list">
            {% for ci in condimento_itens_existentes %}
                <li>
                    <strong>{{ ci.ingrediente.nome }}</strong>: {{ ci.quantidade }} (Custo por unidade: R$ {{ "%.4f"|format(ci.ingrediente.custo_por_unidade) if ci.ingrediente.custo_por_unidade is not none else 'N/A' }})
                    {# Futuramente: Botões para editar/remover #}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Nenhum ingrediente associado a este condimento ainda.</p>
    {% endif %}

    <p><a href="{{ url_for('admin.gerenciar_condimentos') }}">Voltar para Gerenciar Condimentos</a></p>
{% endblock %}